{% load static %}     
<div id="container">
    <div id="resultArea">
        <h2 class="title">Result</h2>
        <div class="diet_info">
            <!--TODO 날짜 함수로 바꾸기-->
            <div class="diet_ym">
                <span class="diet-year">{{date_list.year}}</span>년
                <span class="diet-month">{{date_list.month}}</span>월
                <span class="diet-day">{{date_list.day}}</span>일
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-3">
                <p class="px-5">Breakfast Image</p>
                {% if daily.morning_diet %}
                <img src="{{ daily.morning_diet.url }}" width="300">
                {% endif %}
            </div>
            <div class="col-md-3">
                <p class="px-5">Lunch Image</p>
                {% if daily.lunch_diet %}
                <img src="{{ daily.lunch_diet.url }}" width="300">
                {% endif %}
            </div>
            <div class="col-md-3">
                <p class="px-5">Dinner Image</p>
                {% if daily.dinner_diet %}
                <img src="{{ daily.dinner_diet.url }}" width="300">
                {% endif %}
            </div>  
            <div class="col-md-3">
                <p class="px-5">Dissert Image</p>
                {% if daily.snack_diet %}
                <img src="{{ daily.snack_diet.url }}" width="300">
                {% endif %}
            </div>
        </div>
        <a href="{% url 'dietapp:daily' %}">
            <button class="mt-2 btn btn-success" type="button">이전으로</button>
        </a>
        <button class="mt-2 btn btn-primary" type="button" onclick="updateView()">수정하기</button>
        <input id="target_date" name="target_date" value="{{date_list.target_date}}" hidden>
        <button class="mt-2 btn btn-danger" id="delete_view" type="button" onclick="deleteView()">전체 삭제</button>
        </div>
    </div>
</div>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
<script src="{% static 'js/result.js' %}"></script>
<script>
    const year ='{{date_list.year}}' ;
    const month ='{{date_list.month}}';
    const day = '{{date_list.day}}' ;
    const key = getSelectedDate(year,month,day);

    function getSelectedDate(year,month,day){
         var regex = /[^0-9]/g;
         var day = day.replace(regex, "");
         if (day < 10 && day.length < 2){
             day = "0" + day;
         }
         if (month < 10 && month.length < 2){
             month = "0" + month;
         }
         return year + "-" + month + "-" + day;
     }

    function updateView(){
      window.location.href = '/diet/daily/update?target_date='+ key;
    }

    function deleteView(){
      window.location.href = '/diet/daily/delete?target_date='+ key;
    }

</script>
{% if messages %}
{% for message in messages %}
<script>
    var message = '{{ message.message }}';
    alert(message);
</script>
{% endfor %}
{% endif %}
